<!doctype html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no" />
		<title>Desritory Proxy</title>
		<link rel="shortcut icon" content="favicon.webp" />

		<!-- Required Scramjet scripts - DO NOT REMOVE -->
		<script src="/scram/scramjet.all.js"></script>
		<script src="/baremux/index.js"></script>
		<script src="register-sw.js" defer></script>
		<script src="search.js" defer></script>
		<script src="index.js" defer></script>

		<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@700;900&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">

		<style>
			* {
				margin: 0;
				padding: 0;
				box-sizing: border-box;
			}

			:root {
				--primary: #7c4dff;
				--accent: #a855f7;
				--light: #c084fc;
				--glow: rgba(124, 77, 255, 0.35);
			}

			body {
				font-family: 'Inter', sans-serif;
				background: #1a2332;
				color: white;
				min-height: 100vh;
				display: flex;
				flex-direction: column;
				align-items: center;
				justify-content: center;
				gap: 32px;
				padding: 40px 20px;
				overflow-x: hidden;
			}

			/* Force any iframe Scramjet injects to be fullscreen */
			body > iframe {
				position: fixed !important;
				top: 0 !important;
				left: 0 !important;
				width: 100vw !important;
				height: 100vh !important;
				z-index: 9999 !important;
				border: none !important;
			}

			/* Particle canvas */
			#particles {
				position: fixed;
				top: 0; left: 0;
				width: 100%; height: 100%;
				pointer-events: none;
				z-index: 0;
				background: transparent;
			}

			/* Everything above particles */
			body > * { position: relative; z-index: 1; }

			/* Title */
			.title-block {
				text-align: center;
			}

			.title-block h1 {
				font-family: 'Poppins', sans-serif;
				font-size: clamp(36px, 6vw, 64px);
				font-weight: 900;
				letter-spacing: 3px;
				background: linear-gradient(135deg, var(--light) 0%, var(--primary) 40%, var(--accent) 100%);
				background-size: 200% 200%;
				-webkit-background-clip: text;
				-webkit-text-fill-color: transparent;
				background-clip: text;
				animation: gradientShift 6s ease infinite, floatTitle 4s ease-in-out infinite;
			}

			.title-block p {
				margin-top: 10px;
				font-size: 18px;
				color: rgba(255, 255, 255, 0.5);
				letter-spacing: 1px;
			}

			@keyframes gradientShift {
				0%, 100% { background-position: 0% 50%; }
				50% { background-position: 100% 50%; }
			}

			@keyframes floatTitle {
				0%, 100% { transform: translateY(0px); }
				50% { transform: translateY(-8px); }
			}

			/* Search form */
			#sj-form {
				display: flex;
				gap: 10px;
				width: 100%;
				max-width: 600px;
			}

			#sj-search-engine {
				display: none;
			}

			#sj-address {
				flex: 1;
				padding: 16px 22px;
				background: rgba(255, 255, 255, 0.07);
				border: 1px solid rgba(255, 255, 255, 0.18);
				border-radius: 12px;
				color: white;
				font-size: 16px;
				font-family: 'Inter', sans-serif;
				outline: none;
				transition: all 0.3s;
			}

			#sj-address::placeholder {
				color: rgba(255, 255, 255, 0.35);
			}

			#sj-address:focus {
				border-color: var(--primary);
				box-shadow: 0 0 0 3px var(--glow);
				background: rgba(255, 255, 255, 0.1);
			}

			.go-btn {
				padding: 16px 30px;
				background: var(--primary);
				border: none;
				border-radius: 12px;
				color: white;
				font-size: 16px;
				font-weight: 600;
				font-family: 'Inter', sans-serif;
				cursor: pointer;
				transition: all 0.3s;
			}

			.go-btn:hover {
				opacity: 0.85;
				transform: translateY(-2px);
			}

			/* Quick links */
			.quick-links {
				display: grid;
				grid-template-columns: repeat(auto-fit, minmax(110px, 1fr));
				gap: 12px;
				width: 100%;
				max-width: 600px;
			}

			.quick-link {
				padding: 16px 12px;
				background: rgba(255, 255, 255, 0.06);
				border: 1px solid rgba(255, 255, 255, 0.1);
				border-radius: 14px;
				cursor: pointer;
				transition: all 0.3s;
				display: flex;
				flex-direction: column;
				align-items: center;
				gap: 8px;
				text-decoration: none;
			}

			.quick-link:hover {
				background: rgba(255, 255, 255, 0.11);
				transform: translateY(-3px);
				border-color: rgba(255, 255, 255, 0.2);
				box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
			}

			.quick-link .icon { font-size: 24px; }
			.quick-link .label {
				font-size: 12px;
				color: rgba(255, 255, 255, 0.7);
				font-weight: 500;
			}

			/* Error display */
			#sj-error {
				color: #f87171;
				font-size: 14px;
				text-align: center;
				min-height: 0;
			}

			#sj-error-code {
				color: rgba(255, 255, 255, 0.5);
				font-size: 12px;
				background: rgba(255, 255, 255, 0.05);
				border-radius: 8px;
				padding: 10px;
				max-width: 600px;
				overflow-x: auto;
				display: none;
			}

			#sj-error-code:not(:empty) { display: block; }

			/* Back button overlay (shown when browsing) */
			#proxy-back-btn {
				display: none;
				position: fixed;
				top: 16px;
				left: 16px;
				z-index: 10000;
				padding: 10px 18px;
				background: rgba(0, 0, 0, 0.75);
				border: 1.5px solid var(--primary);
				border-radius: 10px;
				color: white;
				font-family: 'Inter', sans-serif;
				font-size: 14px;
				font-weight: 600;
				cursor: pointer;
				backdrop-filter: blur(8px);
				transition: all 0.3s;
			}

			#proxy-back-btn:hover {
				background: rgba(124, 77, 255, 0.3);
				transform: translateY(-2px);
			}

			/* Footer */
			footer {
				font-size: 12px;
				color: rgba(255, 255, 255, 0.25);
				text-align: center;
			}

			footer a {
				color: rgba(255, 255, 255, 0.35);
				text-decoration: none;
				margin: 0 8px;
				transition: color 0.2s;
			}

			footer a:hover { color: rgba(255, 255, 255, 0.6); }

			@media (max-width: 500px) {
				.quick-links { grid-template-columns: repeat(3, 1fr); }
			}
		</style>
	</head>
	<body>
		<canvas id="particles"></canvas>

		<div class="title-block">
			<h1>Desritory Proxy</h1>
			<p>Welcome to Freedom.</p>
		</div>

		<!-- Scramjet form ‚Äî IDs must stay exactly as-is -->
		<form id="sj-form">
			<input id="sj-search-engine" value="https://www.google.com/search?q=%s" type="hidden" />
			<input id="sj-address" type="text" placeholder="Search or enter a URL..." />
			<button type="submit" class="go-btn">Go</button>
		</form>

		<!-- Quick launch links -->
		<div class="quick-links">
			<a class="quick-link" onclick="goTo('https://google.com')">
				<span class="icon">üîç</span><span class="label">Google</span>
			</a>
			<a class="quick-link" onclick="goTo('https://youtube.com')">
				<span class="icon">‚ñ∂Ô∏è</span><span class="label">YouTube</span>
			</a>
			<a class="quick-link" onclick="goTo('https://discord.com')">
				<span class="icon">üí¨</span><span class="label">Discord</span>
			</a>
			<a class="quick-link" onclick="goTo('https://reddit.com')">
				<span class="icon">ü§ñ</span><span class="label">Reddit</span>
			</a>
			<a class="quick-link" onclick="goTo('https://spotify.com')">
				<span class="icon">üéµ</span><span class="label">Spotify</span>
			</a>
			<a class="quick-link" onclick="goTo('https://twitter.com')">
				<span class="icon">üê¶</span><span class="label">Twitter</span>
			</a>
		</div>

		<!-- Required error elements - keep IDs -->
		<div>
			<p id="sj-error"></p>
			<pre id="sj-error-code"></pre>
		</div>

		<footer>
			<div>Powered by <a href="https://github.com/MercuryWorkshop/scramjet">Scramjet</a> &bull; <a href="credits.html">Credits</a></div>
		</footer>

		<!-- Back button shown when browsing -->
		<button id="proxy-back-btn" onclick="closeProxy()">‚Üê Back</button>

		<script>
			// Quick link helper
			function goTo(url) {
				document.getElementById('sj-address').value = url;
				document.getElementById('sj-form').requestSubmit();
			}

			// Watch for Scramjet injecting its iframe and make it fullscreen
			const observer = new MutationObserver((mutations) => {
				for (const mutation of mutations) {
					for (const node of mutation.addedNodes) {
						if (node.tagName === 'IFRAME') {
							// Force fullscreen
							node.style.cssText = `
								position: fixed !important;
								top: 0 !important;
								left: 0 !important;
								width: 100vw !important;
								height: 100vh !important;
								z-index: 9999 !important;
								border: none !important;
							`;
							// Show the back button
							document.getElementById('proxy-back-btn').style.display = 'block';
						}
					}
				}
			});

			observer.observe(document.body, { childList: true, subtree: true });

			function closeProxy() {
				// Remove any injected iframes
				document.querySelectorAll('body > iframe').forEach(el => el.remove());
				document.getElementById('proxy-back-btn').style.display = 'none';
				// Clear the address bar
				document.getElementById('sj-address').value = '';
			}

			// Particle background
			(function() {
				const canvas = document.getElementById('particles');
				const ctx = canvas.getContext('2d');
				canvas.width = window.innerWidth;
				canvas.height = window.innerHeight;
				window.addEventListener('resize', () => {
					canvas.width = window.innerWidth;
					canvas.height = window.innerHeight;
				});

				const mouse = { x: null, y: null };
				window.addEventListener('mousemove', e => { mouse.x = e.x; mouse.y = e.y; });

				const particles = Array.from({ length: 70 }, () => ({
					x: Math.random() * canvas.width,
					y: Math.random() * canvas.height,
					size: Math.random() * 1.5 + 0.5,
					vx: (Math.random() - 0.5) * 0.5,
					vy: (Math.random() - 0.5) * 0.5,
				}));

				function animate() {
					ctx.clearRect(0, 0, canvas.width, canvas.height);
					for (const p of particles) {
						p.x += p.vx; p.y += p.vy;
						if (p.x < 0 || p.x > canvas.width) p.vx *= -1;
						if (p.y < 0 || p.y > canvas.height) p.vy *= -1;
						ctx.beginPath();
						ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
						ctx.fillStyle = 'rgba(255,255,255,0.4)';
						ctx.fill();

						if (mouse.x) {
							const dx = p.x - mouse.x, dy = p.y - mouse.y;
							const dist = Math.sqrt(dx * dx + dy * dy);
							if (dist < 150) {
								ctx.beginPath();
								ctx.moveTo(p.x, p.y);
								ctx.lineTo(mouse.x, mouse.y);
								ctx.strokeStyle = `rgba(168,85,247,${0.4 * (1 - dist / 150)})`;
								ctx.lineWidth = 1;
								ctx.stroke();
							}
						}
					}
					requestAnimationFrame(animate);
				}
				animate();
			})();
		</script>
	</body>
</html>
